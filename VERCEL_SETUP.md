# Vercel Deployment Setup Guide

## ‚úÖ Project Deployed

Your project has been deployed to Vercel with the name: **aryantiktok1**

**Production URL:** `https://aryantiktok1-*.vercel.app`  
**Custom Domain:** `tokuser.com` (needs to be connected)

---

## üîß Required Setup Steps

### Step 1: Connect Your Domain (tokuser.com)

1. Go to [Vercel Dashboard](https://vercel.com/dashboard)
2. Select project: **aryantiktok1**
3. Go to **Settings** ‚Üí **Domains**
4. Add domain: `tokuser.com`
5. Follow Vercel's DNS configuration instructions
6. Wait for DNS propagation (can take a few minutes to 24 hours)

Once connected, your site will be available at: `https://tokuser.com`

---

### Step 2: Set Up Vercel KV (Required for Postback)

1. In Vercel Dashboard ‚Üí **aryantiktok1** project
2. Go to **Storage** tab
3. Click **Create Database**
4. Select **KV** (Key-Value)
5. Name it: `ogads-completions` (or any name)
6. Choose a region (closest to your users)
7. Click **Create**

After creating, you'll see:
- `KV_REST_API_URL`
- `KV_REST_API_TOKEN`

**IMPORTANT:** Copy these values immediately (they're only shown once)

---

### Step 3: Add Environment Variables

1. In Vercel Dashboard ‚Üí **aryantiktok1** project
2. Go to **Settings** ‚Üí **Environment Variables**
3. Add these two variables:

   **Variable 1:**
   - Name: `KV_REST_API_URL`
   - Value: (paste your KV_REST_API_URL)
   - Environment: Production, Preview, Development (select all)
   
   **Variable 2:**
   - Name: `KV_REST_API_TOKEN`
   - Value: (paste your KV_REST_API_TOKEN)
   - Environment: Production, Preview, Development (select all)

4. Click **Save**
5. **Redeploy** your project (Settings ‚Üí Deployments ‚Üí ... ‚Üí Redeploy)

---

### Step 4: Configure OGAds Postback URL

Once your domain `tokuser.com` is connected:

1. Log in to [OGAds Dashboard](https://app.ogads.com)
2. Go to **Settings** ‚Üí **Postback**
3. Add this postback URL:

```
https://tokuser.com/api/postback?offer_id={offer_id}&offer_name={offer_name}&payout={payout}&session_ip={session_ip}&affiliate_id={affiliate_id}&aff_sub={aff_sub}&aff_sub2={aff_sub2}&aff_sub3={aff_sub3}&aff_sub4={aff_sub4}&aff_sub5={aff_sub5}&source={source}&date={date}&time={time}&datetime={datetime}&session_timestamp={session_timestamp}&ran={ran}
```

**Simplified version (minimum fields):**
```
https://tokuser.com/api/postback?offer_id={offer_id}&offer_name={offer_name}&payout={payout}&session_ip={session_ip}&affiliate_id={affiliate_id}&aff_sub4={aff_sub4}
```

4. Select: **Fire on: Conversion**
5. Click **Save**

---

### Step 5: Test Your Postback

**Option 1: Test with Browser**
Visit this URL (replace with your actual domain):
```
https://tokuser.com/api/postback?offer_id=123&offer_name=Test+Offer&payout=1.50&session_ip=192.168.1.1
```

Expected response: `OK`

**Option 2: View All Completions**
Visit:
```
https://tokuser.com/api/completions
```

You should see JSON data with all stored completions.

---

## üìã Quick Checklist

- [ ] Domain `tokuser.com` connected to Vercel project
- [ ] Vercel KV database created
- [ ] Environment variables added (`KV_REST_API_URL`, `KV_REST_API_TOKEN`)
- [ ] Project redeployed after adding env vars
- [ ] Postback URL added in OGAds dashboard
- [ ] Tested postback URL manually
- [ ] Tested with real offer completion

---

## üîó Important URLs

- **Production Site:** `https://tokuser.com` (after domain setup)
- **Postback Endpoint:** `https://tokuser.com/api/postback`
- **View Completions:** `https://tokuser.com/api/completions`
- **Check Completion:** `https://tokuser.com/api/check-completion?offer_id=123&ip=1.2.3.4`

---

## üêõ Troubleshooting

### Postback Not Working?

1. **Check Vercel KV is set up:**
   - Go to Vercel Dashboard ‚Üí Storage
   - Make sure KV database exists
   - Verify environment variables are set

2. **Check deployment:**
   - Go to Vercel Dashboard ‚Üí Deployments
   - Make sure latest deployment is successful (green checkmark)

3. **Test postback manually:**
   - Visit `https://tokuser.com/api/postback?offer_id=123`
   - Should return "OK"
   - If error, check Vercel function logs

4. **Check OGAds configuration:**
   - Make sure postback URL is exactly as shown above
   - Verify it's set to fire on "Conversion"
   - Check for any typos in the URL

### Domain Not Working?

1. Check DNS settings match Vercel's requirements
2. Wait for DNS propagation (can take up to 24 hours)
3. Verify domain is added in Vercel Dashboard ‚Üí Domains
4. Check SSL certificate is issued (auto-generated by Vercel)

---

## üìû Support

If you need help:
1. Check Vercel function logs: Dashboard ‚Üí Deployments ‚Üí Function Logs
2. Check OGAds postback logs in their dashboard
3. Test each endpoint individually using the URLs above

---

## ‚ú® What's Next?

Once everything is set up:
1. Your offer wall will automatically track completions
2. OGAds will send postback notifications to your server
3. You can view all completions at `/api/completions`
4. You can check individual completions via the API

Good luck! üöÄ

